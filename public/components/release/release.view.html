<!-- Start Modal Window-->
<!-- <button class="btn btn-success pull-right"  ng-click="openReleaseStatus()">
CFD Graph
</button> -->
<div class="graphButton">
  <i class="fa fa-bar-chart pull-right" ng-click="openReleaseStatus()" style="font-size:30px;margin-right:10px;color:#A60059;"></i>
</div>
<!-- End Modal--->

<div ng-init="getSprints()"  ng-if = "projects.length > 0">
  <div ng-init="getSprints()"  >
  <div id="{{projects[projectKey].release[releaseKey]._id}}" class="container">
    <div class="relDiv">

      <h4>{{projects[projectKey].release[releaseKey].name}}<small>{{projects[projectKey].release[releaseKey].description}}</small></h3>
        <div class="boxContainer" ng-repeat= "spr in projects[projectKey].release[releaseKey].sprints"><!-- TODO: Changed for Testing -->
          <div class="box"  ng-class="{'hideSlide':!hovering,'showSlide':hovering} " ng-mouseenter="hovering=true" ng-mouseleave="hovering=false" id="{{spr._id}}" >
            <div class="slideMenuBox">
              <i class="fa fa-trash" ng-click="archiveFun(release.id, spr._id,release.name,spr.name)"></i>
              <i class="fa fa-pencil" ng-click = "showEdit=true; newSprintName= spr.name; newSprintDetails = spr.description; newSprintStartDate = spr.startDate;  newSprintEndDate = spr.endDate"></i>
              <i class="fa fa-star" ng-click="starFun(release.id)"></i>
            </div>
            <div class="boxHeading">
              {{spr.name}}
            </div>
            <div class="desc">
              {{spr.description | limitTo:longDescLimit }}<span ng-hide="spr.description.length < longDescLimit || release.description ==undefined">
                ...
              </span>&nbsp;
            </div>
            <div class="date" >
              {{spr.startDate | date:'dd-MMM-yyyy'}} to {{spr.endDate | date:'dd-MMM-yyyy'}}
            </div>
            <div class="dummy" ui-sref="sprint({ prId : projects[projectKey]._id, releaseID:projects[projectKey].release[releaseKey]._id, sprintID: spr._id})">
            </div>
            <div class="backgroundBlack" ng-class="{'showEdit':showEdit,'hideEdit':!showEdit}" ng-click = "showEdit=false">

            </div>
          <form class="editSprint" ng-class="{'showEdit':showEdit,'hideEdit':!showEdit}">
            <div class="form-group frm">
              <label class="col-sm-4" for="releaseName">Name</label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="inputName" ng-model = "newSprintName">
              </div>
            </div>
            <div class="form-group frm">
              <label class="col-sm-4" for="releaseDesc">Description</label>
              <div class="col-sm-8">
                <textarea class="form-control" id="inputDesc" ng-model = "newSprintDetails"/>
              </div>
            </div>
            <div class="form-group frm">
              <label class="col-sm-4" for="releaseDate">Start Date</label>
              <div class="col-sm-8">
                <input type="date" class="form-control" id="inputDate" value = "{{spr.startDate | date:'yyyy-MM-dd'}}" ng-model = "newSprintStartDate" date-parser="dd.MM.yyyy">
              </div>
            </div>
            <div class="form-group frm">
              <label class="col-sm-4" for="releaseDate">End Date</label>
              <div class="col-sm-8">
                <input type="date" class="form-control" id="inputDate" value = "{{spr.endDate | date:'yyyy-MM-dd'}}" ng-model = "newSprintEndDate" date-parser="dd.MM.yyyy">
              </div>
            </div>
            <button type="button" class="btn btn-success" ng-click="editSprint(newSprintName,newSprintDetails,newSprintStartDate,newSprintEndDate,spr._id,spr.name)? showEdit=false : showEdit=true"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>

            <!-- <button type="button" ng-click = "showEdit=false">X</button> -->
          </form>
          </div>
        </div>
        <div class="box addMore" ng-click="openModal(projects[projectKey].release[releaseKey].name)">
            Add Sprint...
        </div>
      </div>

      </div>
</div>


<div ng-include="'components/activity/menu.view.html'"></div>
</div>
